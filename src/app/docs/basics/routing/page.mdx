# Le Routage dans Nexy

<Mark>
    Le routage est la façon dont Nexy organise les différentes pages et fonctionnalités de votre application. C'est comme créer un plan pour votre maison, où chaque pièce (route) a son propre chemin d'accès !
</Mark>

## Comprendre le Routage

Imaginez votre application comme une bibliothèque :
- Chaque étagère représente un dossier
- Chaque livre représente une page ou une fonctionnalité
- Le chemin pour trouver un livre est votre route

### Comment ça marche ?

Nexy utilise un système de routage basé sur les fichiers. C'est très simple : **la structure de vos dossiers devient automatiquement les chemins de votre application** !

### Structure de Base

<CodeCard fileName="Structure">
  <Structure>
    <Folder folderName="app">
      <File fileName="controller.py"/>
      <Folder folderName="produits">
        <File fileName="controller.py"/>
      </Folder>
    </Folder>
  </Structure>
</CodeCard>

Quand vous créez cette structure :
- `app/controller.py` devient votre page d'accueil (`/`)
- `app/produits/controller.py` devient accessible via `/produits`

## Les Types de Routes

### 1. Routes Simples (Statiques)

Ce sont les routes les plus basiques. Comme une adresse fixe !

<CodeCard fileName="app/controller.py">
<Code language="python" 
code = {
`class ProduitsController(Controller):
    def get(self):
        return {"message": "Voici la liste de nos produits !"}
`}/>
</CodeCard>

**Résultat** : Quand quelqu'un visite `/produits`, il verra "Voici la liste de nos produits !"

### 2. Routes Dynamiques

Imaginez que vous voulez une page différente pour chaque produit. Les routes dynamiques sont là pour ça !

#### a) Routes avec Paramètres `[param]`

<CodeCard fileName="Structure de Route Dynamique">
  <Structure>
    <Folder folderName="app">
      <Folder folderName="produits">
        <Folder folderName="[id]">
          <File fileName="controller.py"/>
        </Folder>
      </Folder>
    </Folder>
  </Structure>
</CodeCard>

<CodeCard fileName="Exemple de Route avec Paramètre">
```python
# app/produits/[id]/controller.py
from nexy import Controller

class ProduitDetailController(Controller):
    def get(self, id: int):
        # id sera automatiquement extrait de l'URL !
        return {"message": f"Voici les détails du produit numéro {id}"}
```
</CodeCard>

**Comment ça marche ?**
- `/produits/1` affichera les détails du produit 1
- `/produits/2` affichera les détails du produit 2
- Et ainsi de suite !

#### b) Routes Attrape-tout `![param]`

Ces routes sont comme des filets qui attrapent tous les chemins possibles !

<CodeCard fileName="Exemple de Route Attrape-tout">
```python
# app/blog/![slug]/controller.py
from nexy import Controller

class BlogController(Controller):
    def get(self, slug: list):
        # slug contiendra tous les segments de l'URL
        return {"message": f"Blog : {'/'.join(slug)}"}
```
</CodeCard>

**Exemples d'URLs capturées :**
- `/blog/2023/janvier/article`
- `/blog/technologie/python`

#### c) Routes Privées `[_param]`

Pour les parties de votre application qui nécessitent une authentification.

<CodeCard fileName="Exemple de Route Privée">
```python
# app/admin/[_dashboard]/controller.py
from nexy import Controller

class AdminController(Controller):
    def get(self):
        # Vérification de l'authentification incluse automatiquement
        return {"message": "Bienvenue dans le tableau de bord admin !"}
```
</CodeCard>

##  Bonnes Pratiques

<Mark>
1. **Organisez Logiquement :**
   - Gardez les routes liées ensemble (ex: tout ce qui concerne les produits dans `/produits`)
   - Utilisez des noms clairs et descriptifs
 
2. **Simplicité d'abord :**
   - Commencez par des routes simples
   - Ajoutez des routes dynamiques seulement quand nécessaire

3. **Sécurité :**
   - Utilisez les routes privées pour le contenu sensible
   - Vérifiez toujours les permissions

4. **Documentation :**
   - Commentez vos contrôleurs
   - Gardez une liste à jour de vos routes
</Mark>

<SwitchPage
    prev = { {
        label: "Concepts de Base",
        href: "/docs/basics"
    }}
    next = { {
        label: "Contrôleurs",
        href: "/docs/basics/controllers"
    }}
/>